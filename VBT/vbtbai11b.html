<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VBT Tin học 4 - Bài 11B: Thực hành luyện tập gõ bàn phím</title>
    <style>
        /* --- CẤU TRÚC CHUNG --- */
        body { font-family: "Segoe UI", Arial, sans-serif; background-color: #eef2f7; margin: 0; padding: 20px; color: #333; }
        .page { background-color: #fff; max-width: 950px; margin: 0 auto; padding: 40px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-radius: 12px; }
        
        h1 { font-size: 20pt; font-weight: bold; text-transform: uppercase; text-align: center; color: #d35400; margin: 10px 0; }
        h3 { font-size: 12pt; text-align: center; color: #7f8c8d; margin-top: 0; text-transform: uppercase; letter-spacing: 1px; }
        hr { border: 0; height: 1px; background: #ddd; margin: 20px 0; }
        
        .question-block {
            margin-bottom: 30px; padding: 20px; border-radius: 8px;
            background-color: #fff; border: 1px solid #eee; transition: 0.3s;
        }

        .question-title { 
            font-weight: bold; font-size: 13pt; margin-bottom: 15px; color: #2c3e50; 
            border-left: 5px solid #2980b9; padding-left: 10px; background-color: #f4f6f7; padding: 10px;
        }

        /* --- LAYOUT CỘT (FLEXBOX) --- */
        .exercise-container {
            display: flex;
            gap: 20px;
            align-items: flex-start;
        }
        
        /* Cột bên trái: Bảng */
        .left-col {
            flex: 3;
        }

        /* Cột bên phải: Kho từ */
        .right-col {
            flex: 1;
            position: sticky;
            top: 20px;
            background: #fdfdfd;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .right-col h4 {
            margin-top: 0;
            text-align: center;
            color: #2980b9;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }

        /* --- DRAG & DROP ITEMS --- */
        .drag-source-area {
            display: flex; 
            flex-direction: column;
            gap: 10px;
            min-height: 200px;
        }
        
        .word-tile {
            background-color: #e67e22; color: white; padding: 8px 15px; border-radius: 6px;
            cursor: grab; font-weight: bold; font-size: 11pt; box-shadow: 0 3px 0 #d35400;
            user-select: none; z-index: 10; text-align: center;
        }
        
        .inline-slot {
            display: inline-flex; min-width: 100px; height: 32px; 
            border-bottom: 2px dashed #333; margin: 0 5px;
            vertical-align: bottom; align-items: center; justify-content: center;
            color: #2980b9; font-weight: bold; padding: 0 5px; background: #fafafa;
        }

        /* --- INPUT NHẬP KÍ TỰ --- */
        .char-input {
            width: 40px; height: 30px; text-align: center; 
            font-size: 14pt; font-weight: bold; color: #2c3e50;
            border: 2px solid #bdc3c7; border-radius: 5px;
            text-transform: uppercase;
        }
        .char-input:focus { border-color: #3498db; outline: none; background: #f0f8ff; }

        /* --- BẢNG CÂU HỎI --- */
        table.fill-table { width: 100%; border-collapse: collapse; margin-top: 0; }
        .fill-table th, .fill-table td { border: 1px solid #bdc3c7; padding: 10px; text-align: left; font-size: 12pt; vertical-align: middle; }
        .fill-table th { background-color: #ecf0f1; text-align: center; }
        .img-col { width: 35%; text-align: center; font-weight: bold; color: #7f8c8d; background: #fff; }
        
        .task-img {
            width: 100%; max-width: 250px; height: auto;
            border: 1px solid #ddd; border-radius: 5px;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1); margin-bottom: 5px;
        }

        /* --- TRẮC NGHIỆM --- */
        .radio-option { display: block; margin: 8px 0; cursor: pointer; font-size: 12pt; }
        .radio-option input { transform: scale(1.3); margin-right: 10px; accent-color: #2980b9; }

        /* --- TRẠNG THÁI ĐÚNG SAI --- */
        .slot-correct { border: 2px solid #27ae60 !important; background-color: #eafaf1; border-radius: 4px; color: #27ae60;}
        .slot-wrong { border: 2px solid #c0392b !important; background-color: #fdedec; border-radius: 4px; color: #c0392b;}
        
        .input-correct { border-color: #27ae60 !important; background-color: #eafaf1; color: #27ae60; }
        .input-wrong { border-color: #c0392b !important; background-color: #fdedec; color: #c0392b; }

        .correct-answer-text {
            color: #c0392b; font-size: 11pt; font-weight: bold; margin-top: 15px; display: none; 
            padding: 10px; background: #fff0f0; border-radius: 5px; border: 1px solid #ffcccc;
        }
        .missing-alert { border: 2px solid red !important; background-color: #fff5f5 !important; }

        /* Controls */
        .controls {
            text-align: center; margin-top: 40px; padding: 20px;
            background: #fff; border-top: 2px solid #eee; position: sticky; bottom: 0; z-index: 100; box-shadow: 0 -5px 15px rgba(0,0,0,0.05);
        }
        button {
            padding: 12px 35px; margin: 0 10px; border: none; border-radius: 30px; cursor: pointer; color: white; font-weight: bold; font-size: 13pt;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2); transition: 0.2s;
        }
        .btn-submit { background-color: #27ae60; }
        .btn-reset { background-color: #e74c3c; }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .exercise-container { flex-direction: column-reverse; }
            .left-col, .right-col { width: 100%; flex: auto; }
            .drag-source-area { flex-direction: row; flex-wrap: wrap; }
        }

    </style>
</head>
<body>

<div class="page">
    <h3>CHỦ ĐỀ: ỨNG DỤNG TIN HỌC</h3>
    <h1>BÀI 11B: THỰC HÀNH LUYỆN TẬP GÕ BÀN PHÍM</h1>
    <hr>

    <div class="question-block" id="ex1">
        <div class="question-title">1. Điền kí tự và kéo thả cách gõ đúng từ kho bên phải.</div>
        
        <div class="exercise-container">
            <div class="left-col">
                <table class="fill-table">
                    <tr>
                        <th width="40%">Hình ảnh</th>
                        <th>Điền thông tin</th>
                    </tr>
                    <tr>
                        <td class="img-col">
                            <img src="trang45h1.png" class="task-img" alt="Hình 1" onerror="this.src='https://via.placeholder.com/300x150?text=Chua+co+anh+trang45h1.png'">
                            <div><b>Hình 1</b></div>
                        </td>
                        <td>
                            a) Kí tự cần gõ: <input type="text" class="char-input required-input" maxlength="1" data-expect="G"><br><br>
                            b) Dùng ngón <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="ut_phai"></span> nhấn giữ phím <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="Shift"></span><br>
                            c) Dùng ngón <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="tro_trai"></span> gõ phím G.
                        </td>
                    </tr>
                    <tr>
                        <td class="img-col">
                            <img src="trang45h2.png" class="task-img" alt="Hình 2" onerror="this.src='https://via.placeholder.com/300x150?text=Chua+co+anh+trang45h2.png'">
                            <div><b>Hình 2</b></div>
                        </td>
                        <td>
                            a) Kí tự cần gõ: <input type="text" class="char-input required-input" maxlength="1" data-expect="V"><br><br>
                            b) Dùng ngón <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="tro_trai"></span> gõ phím V.
                        </td>
                    </tr>
                    <tr>
                        <td class="img-col">
                            <img src="trang46h3.png" class="task-img" alt="Hình 3" onerror="this.src='https://via.placeholder.com/300x150?text=Chua+co+anh+trang46h3.png'">
                            <div><b>Hình 3</b></div>
                        </td>
                        <td>
                            a) Kí tự cần gõ: <input type="text" class="char-input required-input" maxlength="1" data-expect="#"><br><br>
                            b) Dùng ngón <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="ut_phai"></span> nhấn giữ phím <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="Shift"></span><br>
                            c) Dùng ngón <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="giua_trai"></span> gõ phím <input type="text" class="char-input required-input" maxlength="1" data-expect="3">.
                        </td>
                    </tr>
                    <tr>
                        <td class="img-col">
                            <img src="trang46h4.png" class="task-img" alt="Hình 4" onerror="this.src='https://via.placeholder.com/300x150?text=Chua+co+anh+trang46h4.png'">
                            <div><b>Hình 4</b></div>
                        </td>
                        <td>
                            a) Kí tự cần gõ: <input type="text" class="char-input required-input" maxlength="1" data-expect="{"><br><br>
                            b) Dùng ngón <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="ut_trai"></span> nhấn giữ phím <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="Shift"></span><br>
                            c) Dùng ngón <span class="inline-slot required-slot" ondrop="drop(event)" ondragover="allowDrop(event)" data-expect="ut_phai"></span> gõ phím <input type="text" class="char-input required-input" maxlength="1" data-expect="[">.
                        </td>
                    </tr>
                </table>
            </div>

            <div class="right-col">
                <h4>KHO TỪ</h4>
                <div class="drag-source-area" id="source_ex1" ondrop="drop(event)" ondragover="allowDrop(event)">
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_shift" data-val="Shift" data-origin="source_ex1">Shift</div>
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_shift2" data-val="Shift" data-origin="source_ex1">Shift</div>
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_shift3" data-val="Shift" data-origin="source_ex1">Shift</div>
                    
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_ut_phai" data-val="ut_phai" data-origin="source_ex1">Ngón út phải</div>
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_ut_phai2" data-val="ut_phai" data-origin="source_ex1">Ngón út phải</div>
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_ut_phai3" data-val="ut_phai" data-origin="source_ex1">Ngón út phải</div>
                    
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_tro_trai" data-val="tro_trai" data-origin="source_ex1">Ngón trỏ trái</div>
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_tro_trai2" data-val="tro_trai" data-origin="source_ex1">Ngón trỏ trái</div>
                    
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_giua_trai" data-val="giua_trai" data-origin="source_ex1">Ngón giữa trái</div>
                    <div class="word-tile" draggable="true" ondragstart="drag(event)" id="w_ut_trai" data-val="ut_trai" data-origin="source_ex1">Ngón út trái</div>
                </div>
            </div>
        </div>

        <div class="correct-answer-text">
            Đáp án: <br>
            H1: G - Ngón út phải - Shift - Ngón trỏ trái<br>
            H2: V - Ngón trỏ trái<br>
            H3: # - Ngón út phải - Shift - Ngón giữa trái - 3<br>
            H4: { - Ngón út trái - Shift - Ngón út phải - [
        </div>
    </div>

    <div class="question-block" id="ex2">
        <div class="question-title">2. Hãy cho biết nguyên nhân có thể dẫn đến mỗi thông báo lỗi dưới đây (Dựa vào ảnh dưới trang 2).</div>
        
        <div style="margin-bottom: 20px;">
            <strong>Hình 1. Thông báo lỗi khi luyện tập gõ phím Shift (S đỏ, A xanh)</strong>
            <label class="radio-option"><input type="radio" name="q2_1" value="A"> A. Gõ sai phím (Gõ S thay vì A).</label>
            <label class="radio-option"><input type="radio" name="q2_1" value="B"> B. Quên nhấn phím Shift.</label>
        </div>

        <div style="margin-bottom: 20px;">
            <strong>Hình 2. Thông báo lỗi khi luyện tập gõ phím số (3 đỏ, # xanh)</strong>
            <label class="radio-option"><input type="radio" name="q2_2" value="A"> A. Gõ sai ngón tay.</label>
            <label class="radio-option"><input type="radio" name="q2_2" value="B"> B. Quên nhấn phím Shift (Gõ 3 thay vì #).</label>
        </div>

        <div style="margin-bottom: 20px;">
            <strong>Hình 3. Thông báo lỗi khi luyện tập gõ phím Shift (9 đỏ, ( xanh)</strong>
            <label class="radio-option"><input type="radio" name="q2_3" value="A"> A. Quên nhấn phím Shift (Gõ 9 thay vì dấu ngoặc).</label>
            <label class="radio-option"><input type="radio" name="q2_3" value="B"> B. Nhấn thừa phím Shift.</label>
        </div>

        <div style="margin-bottom: 20px;">
            <strong>Hình 4. Thông báo lỗi khi luyện tập gõ phím Shift (2 đỏ, @/" xanh)</strong>
            <label class="radio-option"><input type="radio" name="q2_4" value="A"> A. Gõ sai phím hoàn toàn.</label>
            <label class="radio-option"><input type="radio" name="q2_4" value="B"> B. Quên nhấn phím Shift.</label>
        </div>
        
        <div class="correct-answer-text">Đáp án: Hình 1 (A), Hình 2 (B), Hình 3 (A), Hình 4 (B)</div>
    </div>

    <div class="controls">
        <div id="result-msg" style="font-size: 16pt; margin-bottom: 15px; font-weight: bold; color: #2980b9;"></div>
        <button class="btn-submit" onclick="chamDiem()">NỘP BÀI & KIỂM TRA</button>
        <button class="btn-reset" onclick="location.reload()">LÀM LẠI</button>
    </div>

</div>

<script>
    /* --- LOGIC KÉO THẢ --- */
    function allowDrop(ev) { ev.preventDefault(); ev.target.closest('.inline-slot, .drag-source-area').classList.add('drag-over'); }
    
    document.addEventListener("dragleave", function(event) { 
        let target = event.target.closest('.inline-slot, .drag-source-area');
        if (target) target.classList.remove("drag-over");
    });
    
    function drag(ev) { ev.dataTransfer.setData("text", ev.target.id); }
    
    function drop(ev) {
        ev.preventDefault();
        let target = ev.target.closest('.inline-slot, .drag-source-area');
        if (target) {
            target.classList.remove("drag-over");
            var data = ev.dataTransfer.getData("text");
            var draggedEl = document.getElementById(data);
            
            if (draggedEl) {
                if (target.classList.contains("inline-slot")) {
                    // Nếu slot đã có thẻ, trả thẻ cũ về kho
                    if (target.children.length > 0) {
                        let oldItem = target.children[0];
                        document.getElementById(oldItem.getAttribute('data-origin')).appendChild(oldItem);
                    }
                    target.appendChild(draggedEl);
                } else if (target.classList.contains("drag-source-area")) {
                    // Trả về kho
                    let origin = draggedEl.getAttribute('data-origin');
                    document.getElementById(origin).appendChild(draggedEl);
                }
            }
        }
    }

    /* --- CHẤM ĐIỂM --- */
    function checkProgress() {
        let allAnswered = true;
        let firstMissing = null;
        document.querySelectorAll('.missing-alert').forEach(el => el.classList.remove('missing-alert'));

        // 1. Kiểm tra Drag Slots
        document.querySelectorAll('.required-slot').forEach(el => {
            if(el.children.length === 0) { allAnswered = false; el.classList.add('missing-alert'); if(!firstMissing) firstMissing = el; }
        });

        // 2. Kiểm tra Input Text
        document.querySelectorAll('.required-input').forEach(el => {
            if(el.value.trim() === "") { allAnswered = false; el.classList.add('missing-alert'); if(!firstMissing) firstMissing = el; }
        });

        // 3. Kiểm tra Radios
        ['q2_1', 'q2_2', 'q2_3', 'q2_4'].forEach(name => {
            if (!document.querySelector(`input[name="${name}"]:checked`)) {
                allAnswered = false;
                let block = document.querySelector(`input[name="${name}"]`).closest('div');
                block.classList.add('missing-alert');
                if(!firstMissing) firstMissing = block;
            }
        });

        if(!allAnswered) {
            alert("Bạn chưa hoàn thành tất cả các câu hỏi! Vui lòng kiểm tra lại.");
            if(firstMissing) firstMissing.scrollIntoView({behavior: "smooth", block: "center"});
            return false;
        }
        return true;
    }

    function chamDiem() {
        if (!checkProgress()) return;

        // Reset Styles
        document.querySelectorAll('.correct-answer-text').forEach(e => e.style.display = 'none');
        document.querySelectorAll('.slot-correct, .slot-wrong').forEach(e => e.classList.remove('slot-correct', 'slot-wrong'));
        document.querySelectorAll('.input-correct, .input-wrong').forEach(e => e.classList.remove('input-correct', 'input-wrong'));
        document.querySelectorAll('div.question-block').forEach(e => {
            e.style.border = '1px solid #eee'; e.style.backgroundColor = '#fff';
        });

        let correctCount = 0;
        let total = 0;
        let ex1Correct = true;

        // --- BÀI 1: Text Input ---
        document.querySelectorAll('.required-input').forEach(inp => {
            total++;
            // So sánh không phân biệt hoa thường
            if(inp.value.trim().toUpperCase() === inp.getAttribute('data-expect').toUpperCase()) {
                inp.classList.add('input-correct');
                correctCount++;
            } else {
                inp.classList.add('input-wrong');
                ex1Correct = false;
            }
        });

        // --- BÀI 1: Drag & Drop ---
        document.querySelectorAll('#ex1 .required-slot').forEach(slot => {
            total++;
            let expect = slot.getAttribute('data-expect');
            let child = slot.children[0];
            if (child && child.getAttribute('data-val') === expect) {
                slot.classList.add('slot-correct');
                correctCount++;
            } else {
                slot.classList.add('slot-wrong');
                ex1Correct = false;
            }
        });
        if(!ex1Correct) document.querySelector('#ex1 .correct-answer-text').style.display = 'block';

        // --- BÀI 2: Radio ---
        let ex2Correct = true;
        let answers2 = { 'q2_1': 'A', 'q2_2': 'B', 'q2_3': 'A', 'q2_4': 'B' };
        for (let key in answers2) {
            total++;
            let userVal = document.querySelector(`input[name="${key}"]:checked`).value;
            let block = document.querySelector(`input[name="${key}"]`).closest('div');
            if(userVal !== answers2[key]) {
                ex2Correct = false;
                block.style.borderLeft = "3px solid #c0392b";
                block.style.paddingLeft = "10px";
            } else {
                correctCount++;
                block.style.borderLeft = "3px solid #27ae60";
                block.style.paddingLeft = "10px";
            }
        }
        if(!ex2Correct) document.querySelector('#ex2 .correct-answer-text').style.display = 'block';

        document.getElementById('result-msg').innerText = `Kết quả: ${correctCount}/${total} câu đúng.`;
        document.getElementById('result-msg').scrollIntoView({behavior: "smooth"});
    }
</script>

</body>
</html>