<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÔN TẬP THI GPLX HẠNG A1</title>
    <style>
        :root {
            --primary-color: #007bff;
            --success-color: #28a745;
            --error-color: #dc3545;
            --bg-color: #f4f6f9;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .question-card {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .question-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .question-title span.badge {
            background-color: var(--error-color);
            color: white;
            font-size: 0.7em;
            padding: 2px 6px;
            border-radius: 4px;
            vertical-align: middle;
            margin-left: 5px;
        }

        .options-list {
            list-style: none;
            padding: 0;
        }

        .option-item {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #eee;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
        }

        .option-item:hover {
            background-color: #f8f9fa;
        }

        .option-item input[type="radio"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        /* Styles for results */
        .option-item.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
            font-weight: bold;
        }

        .option-item.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }

        .btn-group {
            text-align: center;
            margin-top: 30px;
        }

        button {
            padding: 12px 30px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            font-weight: bold;
            transition: background 0.3s;
        }

        #btn-submit {
            background-color: var(--primary-color);
            color: white;
        }

        #btn-submit:hover {
            background-color: #0056b3;
        }

        #btn-reset {
            background-color: #6c757d;
            color: white;
            display: none; /* Hidden initially */
        }

        #btn-reset:hover {
            background-color: #545b62;
        }

        #result-area {
            text-align: center;
            font-size: 1.5em;
            margin-top: 20px;
            font-weight: bold;
        }

        .score-pass { color: var(--success-color); }
        .score-fail { color: var(--error-color); }

    </style>
</head>
<body>

<div class="container">
    <h1>ÔN TẬP THI GPLX HẠNG A1</h1>
    
    <div id="quiz-container">
        </div>

    <div id="result-area"></div>

    <div class="btn-group">
        <button id="btn-submit" onclick="submitQuiz()">Nộp bài</button>
        <button id="btn-reset" onclick="initQuiz()">Làm lại đề mới</button>
    </div>
</div>

<script>
    // Dữ liệu câu hỏi (Đã cập nhật thêm câu 43 và 51)
    const questionBank = [
        {
            id: 14,
            isParalysis: true,
            question: "Hành vi nào dưới đây bị nghiêm cấm?",
            options: [
                "Sử dụng xe đạp đi trên các tuyến quốc lộ.",
                "Rải vật sắc nhọn, đổ chất gây trơn trượt trên đường bộ.",
                "Cả hai ý trên."
            ],
            answer: 1 
        },
        {
            id: 15,
            isParalysis: true,
            question: "Hành vi đưa xe cơ giới, xe máy chuyên dùng tham gia giao thông đường bộ nào dưới đây bị cấm?",
            options: [
                "Không có chứng nhận kiểm định an toàn kỹ thuật và bảo vệ môi trường.",
                "Hết niên hạn sử dụng.",
                "Cả hai ý trên."
            ],
            answer: 2
        },
        {
            id: 16,
            isParalysis: true,
            question: "Tổ chức đua xe được phép thực hiện khi nào?",
            options: [
                "Trên đường phố không có người qua lại.",
                "Được người dân ủng hộ.",
                "Được cơ quan có thẩm quyền cấp phép."
            ],
            answer: 2
        },
        {
            id: 17,
            isParalysis: true,
            question: "Hành vi đua xe trái phép bị xử lý như thế nào?",
            options: [
                "Chỉ bị nhắc nhở.",
                "Tùy theo mức độ của hành vi vi phạm có thể bị xử lý hành chính hoặc xử lý hình sự.",
                "Không bị xử lý hình sự."
            ],
            answer: 1
        },
        {
            id: 18,
            isParalysis: true,
            question: "Người điều khiển phương tiện tham gia giao thông đường bộ mà trong máu hoặc hơi thở có nồng độ cồn có bị nghiêm cấm không?",
            options: [
                "Bị nghiêm cấm.",
                "Không bị nghiêm cấm.",
                "Không bị nghiêm cấm, nếu nồng độ cồn trong máu ở mức nhẹ."
            ],
            answer: 0
        },
        {
            id: 19,
            isParalysis: true,
            question: "Theo Luật Phòng chống tác hại của rượu, bia, đối tượng nào dưới đây bị cấm sử dụng rượu, bia khi tham gia giao thông?",
            options: [
                "Người điều khiển xe ô tô, xe mô tô, xe đạp, xe gắn máy.",
                "Người được chở trên xe cơ giới.",
                "Cả hai ý trên."
            ],
            answer: 0
        },
        {
            id: 20,
            isParalysis: true,
            question: "Hành vi giao xe ô tô, mô tô cho người nào sau đây tham gia giao thông đường bộ bị nghiêm cấm?",
            options: [
                "Người chưa đủ tuổi theo quy định.",
                "Người không có giấy phép lái xe.",
                "Người có giấy phép lái xe nhưng đã bị trừ hết 12 điểm.",
                "Cả ba ý trên."
            ],
            answer: 3
        },
        {
            id: 21,
            isParalysis: true,
            question: "Hành vi nào sau đây bị nghiêm cấm?",
            options: [
                "Điều khiển xe cơ giới lạng lách, đánh võng, rú ga liên tục khi tham gia giao thông trên đường.",
                "Xúc phạm, đe dọa, cản trở, chống đối hoặc không chấp hành hiệu lệnh, hướng dẫn, yêu cầu kiểm tra... của người thi hành công vụ.",
                "Cả hai ý trên."
            ],
            answer: 2
        },
        {
            id: 23,
            isParalysis: true,
            question: "Hành vi nào sau đây bị cấm?",
            options: [
                "Lắp đặt, sử dụng thiết bị âm thanh, ánh sáng trên xe cơ giới, xe máy chuyên dùng gây mất trật tự, an toàn giao thông đường bộ.",
                "Cản trở người, phương tiện tham gia giao thông; ném gạch, đất, đá, cát hoặc vật thể khác vào người, phương tiện đang tham gia giao thông.",
                "Cả hai ý trên."
            ],
            answer: 2
        },
        {
            id: 39,
            isParalysis: true,
            question: "Người lái xe được phép vượt xe trên cầu hẹp có một làn đường, đường cong có tầm nhìn bị hạn chế hay không?",
            options: [
                "Được phép vượt khi đường vắng.",
                "Không được phép vượt.",
                "Được phép vượt khi có việc gấp."
            ],
            answer: 1
        },
        {
            id: 40,
            isParalysis: true,
            question: "Muốn vượt xe phía trước, người lái xe mô tô phải có tín hiệu như thế nào dưới đây để bảo đảm an toàn?",
            options: [
                "Bấm còi liên tục.",
                "Rú ga liên tục để xe phía trước biết xe mình xin vượt.",
                "Báo hiệu xin vượt bằng đèn hoặc còi."
            ],
            answer: 2 
        },
        // --- CẬP NHẬT MỚI: CÂU 43 ---
        {
            id: 43,
            isParalysis: true,
            question: "Khi điều khiển phương tiện tham gia giao thông, hành vi nào sau đây bị cấm?",
            options: [
                "Dùng tay cầm và sử dụng điện thoại hoặc thiết bị điện tử khác.",
                "Chở người trên thùng xe ô tô chở hàng trong trường hợp chở người đi làm nhiệm vụ cứu nạn, cứu hộ..."
            ],
            answer: 0 // Đáp án 1: Dùng tay cầm...
        },
        {
            id: 44,
            isParalysis: true,
            question: "Người lái xe không được vượt xe khác khi gặp trường hợp nào dưới đây?",
            options: [
                "Trên cầu hẹp có một làn đường; nơi đường giao nhau, đường bộ giao nhau cùng mức với đường sắt.",
                "Trên cầu có từ 02 làn xe trở lên.",
                "Trên đường có 02 làn đường được phân chia làn bằng vạch kẻ nét đứt."
            ],
            answer: 0 
        },
        {
            id: 49,
            isParalysis: true,
            question: "Người điều khiển xe mô tô hai bánh, xe mô tô ba bánh, xe gắn máy có được phép sử dụng xe để kéo hoặc đẩy các phương tiện khác khi tham gia giao thông không?",
            options: [
                "Được phép.",
                "Nếu phương tiện được kéo, đẩy có khối lượng nhỏ hơn phương tiện của mình.",
                "Tùy trường hợp.",
                "Không được phép."
            ],
            answer: 3 
        },
        {
            id: 50,
            isParalysis: true,
            question: "Khi điều khiển xe mô tô hai bánh, xe mô tô ba bánh, xe gắn máy, những hành vi nào sau đây không được phép?",
            options: [
                "Buông cả hai tay; sử dụng xe để kéo, đẩy xe khác; sử dụng chân chống hoặc vật khác quẹt xuống đường khi xe đang chạy.",
                "Buông một tay; sử dụng xe để chở người hoặc hàng hóa...",
                "Đội mũ bảo hiểm; chạy xe đúng tốc độ quy định..."
            ],
            answer: 0 
        },
        // --- CẬP NHẬT MỚI: CÂU 51 ---
        {
            id: 51,
            isParalysis: true,
            question: "Khi điều khiển xe mô tô hai bánh, xe mô tô ba bánh, xe gắn máy, những hành vi nào sau đây không được phép?",
            options: [
                "Buông cả hai tay; sử dụng xe để kéo, đẩy xe khác, vật khác; sử dụng chân chống hoặc vật khác quẹt xuống đường khi xe đang chạy.",
                "Chở tối đa hai người phía sau khi chở người bệnh đi cấp cứu, áp giải người có hành vi vi phạm pháp luật...",
                "Đội mũ bảo hiểm; chạy xe đúng tốc độ quy định và chấp hành đúng quy tắc giao thông đường bộ.",
                "Chở người ngồi sau dưới 16 tuổi."
            ],
            answer: 0 // Đáp án 1: Buông cả hai tay...
        },
        {
            id: 54,
            isParalysis: true,
            question: "Người lái xe, người được chở trên xe mô tô hai bánh, xe mô tô ba bánh, xe gắn máy phải thực hiện quy định nào dưới đây?",
            options: [
                "Đội mũ bảo hiểm theo đúng quy chuẩn kỹ thuật quốc gia và cài quai đúng quy cách.",
                "Người lái xe phải đội mũ bảo hiểm, người được chở trên xe không nhất thiết phải đội mũ bảo hiểm.",
                "Phải đội mũ bảo hiểm nhưng không nhất thiết phải cài quai."
            ],
            answer: 0 
        },
        {
            id: 56,
            isParalysis: true,
            question: "Người lái xe mô tô hai bánh, xe mô tô ba bánh, xe gắn máy không được thực hiện những hành vi nào dưới đây?",
            options: [
                "Đi xe dàn hàng ngang; buông cả hai tay.",
                "Sử dụng xe để kéo, đẩy xe khác, vật khác, dẫn dắt vật nuôi, mang, vác và chở vật cồng kềnh...",
                "Ngồi về một bên điều khiển xe; đứng, nằm trên xe...",
                "Cả ba ý trên."
            ],
            answer: 3 
        },
        {
            id: 57,
            isParalysis: true,
            question: "Người lái xe mô tô hai bánh, xe mô tô ba bánh, xe gắn máy không được thực hiện các hành vi nào sau đây?",
            options: [
                "Đi xe dàn hàng ngang; đi xe vào phần đường dành cho người đi bộ và phương tiện khác.",
                "Sử dụng ô, thiết bị âm thanh, trừ thiết bị trợ thính.",
                "Cả hai ý trên."
            ],
            answer: 2 
        },
        {
            id: 58,
            isParalysis: true,
            question: "Người lái xe mô tô hai bánh, xe mô tô ba bánh, xe gắn máy không được thực hiện hành vi nào sau đây?",
            options: [
                "Đi trên phần đường, làn đường quy định, chấp hành hiệu lệnh...",
                "Đi xe dàn hàng ngang, đi xe vào phần đường dành cho người đi bộ.",
                "Cả hai ý trên."
            ],
            answer: 1 
        }
    ];

    let currentQuestions = [];

    // Hàm xáo trộn mảng (Fisher-Yates Shuffle)
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    // Khởi tạo bài thi
    function initQuiz() {
        const container = document.getElementById('quiz-container');
        container.innerHTML = '';
        document.getElementById('result-area').innerHTML = '';
        document.getElementById('btn-submit').style.display = 'inline-block';
        document.getElementById('btn-reset').style.display = 'none';

        // Copy và đảo thứ tự câu hỏi
        currentQuestions = shuffleArray([...questionBank]);

        currentQuestions.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            card.id = `card-${index}`;

            const badge = q.isParalysis ? '<span class="badge">Câu hỏi *</span>' : '';

            let optionsHtml = '';
            q.options.forEach((opt, optIndex) => {
                optionsHtml += `
                    <li class="option-item" id="opt-${index}-${optIndex}" onclick="selectOption(${index}, ${optIndex})">
                        <input type="radio" name="question-${index}" value="${optIndex}" id="radio-${index}-${optIndex}">
                        <label for="radio-${index}-${optIndex}">${opt}</label>
                    </li>
                `;
            });

            card.innerHTML = `
                <div class="question-title">Câu ${index + 1}: ${q.question} ${badge}</div>
                <ul class="options-list">
                    ${optionsHtml}
                </ul>
            `;
            container.appendChild(card);
        });
    }

    // Hỗ trợ click vào dòng option để chọn radio
    function selectOption(qIndex, optIndex) {
        if(document.getElementById('btn-submit').style.display === 'none') return;
        const radio = document.getElementById(`radio-${qIndex}-${optIndex}`);
        radio.checked = true;
    }

    // Xử lý nộp bài
    function submitQuiz() {
        let score = 0;
        let correctCount = 0;
        const total = currentQuestions.length;
        let isParalysisFailed = false;

        currentQuestions.forEach((q, index) => {
            const selected = document.querySelector(`input[name="question-${index}"]:checked`);
            const card = document.getElementById(`card-${index}`);
            
            // Highlight đáp án đúng
            const correctOptionElement = document.getElementById(`opt-${index}-${q.answer}`);
            correctOptionElement.classList.add('correct');

            if (selected) {
                const selectedValue = parseInt(selected.value);
                if (selectedValue === q.answer) {
                    correctCount++;
                } else {
                    // Highlight đáp án sai
                    document.getElementById(`opt-${index}-${selectedValue}`).classList.add('incorrect');
                    if(q.isParalysis) {
                        isParalysisFailed = true;
                    }
                }
            } else {
                if(q.isParalysis) {
                    isParalysisFailed = true; 
                }
            }
            
            // Disable inputs
            const inputs = card.querySelectorAll('input');
            inputs.forEach(input => input.disabled = true);
        });

        // Hiển thị kết quả
        const resultArea = document.getElementById('result-area');
        let resultText = `Kết quả: ${correctCount}/${total} câu đúng.<br>`;
        
        // Ngưỡng đậu (khoảng 80%)
        const passThreshold = Math.ceil(total * 0.8);

        if (correctCount === total) {
             resultText += '<span class="score-pass">XUẤT SẮC! BẠN ĐÃ ĐẬU.</span>';
        } else if (isParalysisFailed) {
            resultText += '<span class="score-fail">BẠN ĐÃ TRƯỢT (Sai câu điểm liệt).</span>';
        } else if (correctCount >= passThreshold) { 
            resultText += '<span class="score-pass">BẠN ĐÃ ĐẬU.</span>';
        } else {
            resultText += '<span class="score-fail">BẠN ĐÃ TRƯỢT.</span>';
        }

        resultArea.innerHTML = resultText;
        
        // Đổi nút
        document.getElementById('btn-submit').style.display = 'none';
        document.getElementById('btn-reset').style.display = 'inline-block';
        
        // Cuộn xuống kết quả
        resultArea.scrollIntoView({behavior: "smooth"});
    }

    // Chạy khi tải trang
    window.onload = initQuiz;

</script>

</body>
</html>